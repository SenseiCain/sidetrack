<!DOCTYPE html>
<html>
  <head>
    <title>Sidetrack</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "bootstrap.min" %>
    <script src="https://kit.fontawesome.com/47144c595f.js" crossorigin="anonymous"></script>

  </head>

  <body>

    <header id="header" class="container bg-info mb-2">
      <div class='row'>
        <div class="col d-flex align-items-center">
          <i class="fas fa-lg fa-dog pr-2"></i>
          <h3 class="m-0">
            <%= content_tag(:a, 'Sidetrack', href: root_path, style: "text-decoration:none; color: inherit", class: 'text-black') %>
          </h3>
        </div>
        <div class="col d-flex align-items-center justify-content-end">
          <% if @user %>
            <h4 class="m-0">
              <%= content_tag(:a, @user.name, href: root_path, style: "text-decoration:none; color: inherit", class: 'text-black') %>
            </h4>
            -
            <%= form_tag logout_path do %>
              <input class="btn-link border-0" type=submit value='logout'>
            <% end %>
          <% else %>
            <%= link_to 'Log In', login_path %>
          <% end %>
        </div>
      </div>
    </header>

    <section class="container">
      <div id="main" class="row justify-content-between align-items-start">
        <div class="col-md-9">
          <%= yield %>
        </div>
        <div class="col-md-2 border px-0 pb-2">
          <div class='row bg-info mx-0 px-0 py-2'>
            <%= link_to('Create a new post', new_post_path, class: 'col text-center text-white', style: 'text-decoration:none') %>
          </div>
          <div class='p-2'>
            <%= form_tag root_path, :method => 'get' do |f| %>
              <h6>Categories:</h6>
              <%= collection_select(:query, :categories, @categories, :id, :name) %>
              <h6 class="pt-2">Date:</h6>

              <!-- REFACTOR THIS!!! -->
              <select name="query[date]" id="query_date">
                  <option value=""></option>
                  <option value="1">Past week</option>
                  <option value="2">Past month</option>
                  <option value="3">Past year</option>
              </select><br>

              <%= submit_tag('Filter', class: 'btn btn-small btn-info py-0 px-3 mt-4 mx-auto d-block') %>
            <% end %>
          </div>
        </div>
      </div>
    </section>
  </body>
</html>
